{% extends "traffic_signs/base.html" %}

{% block title %}Celery Upload - Traffic Sign Detector{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header bg-success text-white">
        <h2>Celery Background Processing</h2>
    </div>
    <div class="card-body">
        <p class="lead">
            Upload an image for background processing with Celery and Redis.
            The image will be processed asynchronously.
        </p>
        
        <!-- ÐŸÐ ÐžÐ¡Ð¢ÐÐ¯ Ð¤ÐžÐ ÐœÐ Ð‘Ð•Ð— JAVASCRIPT -->
        <form method="POST" action="/celery-upload/" enctype="multipart/form-data">
    {% csrf_token %}
            <div class="mb-3">
                <label for="image" class="form-label">Select Image:</label>
                <input type="file" class="form-control" id="image" name="image" accept="image/*" required>
            </div>
                <button type="submit" class="btn btn-success btn-lg">
                ðŸ“¤ Upload for Celery Processing
                </button>
        </form>

        <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ (Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ð°Ð½Ð¾ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸) -->
        {% if task_id %}
        <div class="alert alert-info mt-3">
            <h4>âœ… Task Submitted!</h4>
            <p>Task ID: <code>{{ task_id }}</code></p>
            <p>Check Celery worker logs for progress.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}